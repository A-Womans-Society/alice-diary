<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorate="~{layouts/messageLayout}">

<th:block layout:fragment="css">

</th:block>

<th:block layout:fragment="script">
	<script th:src="@{/js/message/msgList.js}"></script>
</th:block>

<div layout:fragment="content">

	<h1 th:text="${fromId} + '님의 쪽지함'" align="center"></h1>
	<h3 th:align="center">친구들과 1:1로 대화해보세요!</h3>

	<!--/* 검색 영역 */-->
	<div class="input-group" id="adv-search" th:align="center">
		<select id="searchType" class="form-control" style="width: 100px;">
			<option value="">전체</option>
			<option value="id">받는사람 아이디</option>
			<option value="tonum">받는사람 회원번호</option>
			<option value="content">내용</option>
		</select> <input type="text" id="searchKeyword" class="form-control"
			placeholder="키워드를 입력해 주세요." style="width: 300px;" />
		<button type="button">검색</button>
	</div>

	<!--/* 쪽지함 목록 영역 */-->
	<div class="container-fluid" th:align="center">
		<th:block th:each="m : ${mldtos}">
			<div th:attr="class='row'"
				style="height: 100px; background: #F0D9FF;">
				<p>
					<a th:href="@{'/member/' + ${m.messageToNum}}"> <span
						th:text="${m.messageToId}"></span>
					</a> <span th:text="'님과의 쪽지함'"></span>
				</p>
				<p>
					<a
						th:href="@{'/messagebox/' + ${m.messageFromNum} + '/' + ${m.messageToNum}}">
						<span th:text="${m.recentContent}"></span>
					</a> &nbsp;
				</p>
				<p th:align="right">
					<button class="btn btn-primary"
						th:onclick="deleteMessage([[${m.messageFromNum}]], [[${m.messageToNum}]])"
						type="button">쪽지함 삭제</button>
				</p>
			</div>
	</div>
	<!-- /container -->

	<!-- 쪽지 보내기 모달창 -->
	<div>
		<button type="button" class="btn btn-primary" data-toggle="modal"
			data-target="#exampleModal" data-whatever="messageToId">쪽지
			보내기</button>

		<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">쪽지 보내기✉️</h5>
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<form name="msgForm" id="msgForm" th:object="${mdto}" method="post">
						<div class="modal-body">
							<div class="form-group">
								<label for="recipient-name" class="col-form-label">받는 사람</label>
								<input type="text" class="form-control"
									th:field="*{messageToId}" placeholder="아이디나 이름을 입력하세요!">
							</div>
							<div class="form-group">
								<label for="message-text" class="col-form-label">쪽지 내용</label>
								<textarea class="form-control" th:field="*{content}"
									id="content"></textarea>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-dismiss="modal">취소</button>
							<button type="submit" class="btn btn-primary">쪽지 보내기</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
</html>
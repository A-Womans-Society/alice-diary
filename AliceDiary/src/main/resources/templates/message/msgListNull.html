<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorate="~{layouts/messageLayout}">

<th:block layout:fragment="css">
	<!-- bootstrap-select -->
	<link rel="stylesheet"
		th:href="@{https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css}">

</th:block>

<th:block layout:fragment="script">
	<script th:src="@{/js/message/msgList.js}"></script>
	<!-- bootstrap-select -->
	<script
		th:src="@{https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js}">		
	</script>
</th:block>


<div layout:fragment="content">
	<div class="container-fluid h-100">
		<div class="row h-100">
			<div class="col-12 h-100">
				<h2 class="text-center m-0 pt-5" style="height: 15%;"
					th:text="${fromId} + '님의 쪽지함'"></h2>
				<div class="text-center">
					<small>친구들과 1:1로 대화해보세요!</small>
				</div>


				<div class="d-flex justify-content-center" style="height: 10%;">
					<div class="d-flex align-items-center">
						<!--/* 검색 영역 */-->
						<div class="input-group" id="adv-search" th:align="center">
							<select id="searchType" class="form-control"
								style="width: 100px;">
								<option value="">전체</option>
								<option value="id">받는사람 아이디</option>
								<option value="tonum">받는사람 회원번호</option>
								<option value="content">내용</option>
							</select> <input type="text" id="searchKeyword" class="form-control"
								placeholder="키워드를 입력해 주세요." style="width: 300px;" />
							<button type="button">검색</button>
						</div>

					</div>
				</div>
				<div style="height: 10%;" class="text-right">
					<button onclick="openModal()" type="button" class="btn btn-primary">
						쪽지 보내기</button>
				</div>

				<div class="h-25">
					<!--/* 쪽지함 목록 영역 */-->
					<div class="container-fluid" th:align="center">쪽지함이 비었습니다!</div>
				</div>
			</div>

		</div>
	</div>

	<!-- Modal -->
	<div class="modal" tabindex="-1" role="dialog" id="messageModal">
		<div class="modal-dialog modal-dialog-centered modal-lg"
			role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title">쪽지 보내기✉️</h1>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<form name="msgForm" id="msgForm" th:object="${mdto}"
					th:method="post" th:action="@{|/messagebox/${fromId}|}">
					<div class="modal-body">
						<div>
							<strong>받는 사람</strong>&nbsp; <select class="selectpicker"
								data-live-search="true" data-hide-disabled="true"
								th:field="*{messageToId}">
								<th:block th:if="${#lists.size(friendsList) == 0}">
									<option value="">친구를 추가해보세요!</option>
								</th:block>

								<th:block th:unless="${#lists.size(friendsList) == 0}">
									<option th:each="f : ${friendsList}" th:value="${f.id}"
										th:text="${f.name}"></option>
								</th:block>
							</select>
							<div>
								<label for="message-text" class="col-form-label">쪽지 내용</label>
								<textarea class="form-control" th:field="*{content}"
									id="content" required></textarea>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-dismiss="modal">취소</button>
						<input type="submit" class="btn btn-primary" value="쪽지 보내기">
					</div>
					<input type="hidden" id="fromId" th:value="${fromId}" />
				</form>
			</div>
		</div>
	</div>

</div>
</html>
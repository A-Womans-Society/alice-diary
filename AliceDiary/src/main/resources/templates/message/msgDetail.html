<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport"
		content="width=device-width, height=device-height,
		                      minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" th:href="@{/css/message/msgDetail.css}" />
	<script type="text/javascript" th:src="@{/js/message/msgDetail.js}"></script>
	
	<!-- bootstrap 4 -->
	<link rel="stylesheet"
		th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css}"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
		crossorigin="anonymous">
	
	<!-- <script th:src="@{https://code.jquery.com/jquery-3.2.1.slim.min.js}" -->
	<!-- 	integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" -->
	<!-- 	crossorigin="anonymous"></script> -->
	
	<script
	    src="https://code.jquery.com/jquery-3.4.1.min.js"
	    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	    crossorigin="anonymous"></script>
	<script
		th:src="@{https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js}"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script
		th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js}"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>
	<script type="text/javascript" th:src="@{/js/msgDetail.js}"></script>
	
	</head>
<body>


	<h1 th:text="${toId} + '님과의 쪽지함'" align="center"></h1>

	<div class="container-fluid">
		<th:block th:each="m : ${mdtos}">
			<div th:attr="class=${m.messageFromNum != userNum ? 'row d-flex justify-content-start' : 'row d-flex justify-content-end'}">
				<div th:attr="class=${m.messageFromNum == userNum ? 'col-6 bg-info' : 'col-6'}">
<!-- 					<p><img id="profile" th:src="${m.profile}" alt="프로필사진" th:if="${m.profile != null}" /></p> -->
					<p th:text="${m.messageFromId}"></p>
					<p th:text="${m.content}"></p>
					<p align="right" th:text="${#temporals.format(m.sendDate, 'yyyy-MM-dd HH:mm')}"></p>				
				</div>
			</div>
		</th:block>
	</div>

<div>
	<form th:align="center" th:action="'../' + ${userNum} + '/' + ${toNum}" th:object="${mdto}" method="post" enctype="multipart/form-data">
		<textarea th:name="content" th:align="center" cols="90%" rows="5" placeholder="최대 2000자" required></textarea>
		<input type="file" th:name="originName">
		<button id="sendMsgBtn" type="submit">전송</button>
	</form>
</div>

	<button th:onclick="deleteMessage([[${userNum}]], [[${toNum}]])" type="button">쪽지함 나가기</button>

</body>
</html>
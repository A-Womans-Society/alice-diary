<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorate="~{layouts/friendsLayout}">

<th:block layout:fragment="script">
	<script th:src="@{/js/friends/friendsList.js}"></script>
</th:block>

<div layout:fragment="content">
	<div class="container-fluid h-100">
		<div class="row h-100">
			<div class="col-12 h-100">
				<h2 class="text-center m-0 pt-5" style="height: 15%;">친구 목록</h2>
				<div class="d-flex justify-content-center" style="height: 13%;">
					<div class="d-flex align-items-center"
						style="border: 2px solid #dccae9; border-radius: 25px; width: 70%;">
						<div class="w-100 text-center">
							<input type="text" id="searchFriend" class="w-50"
								name="searchFriend" placeholder="친구 검색(아이디/이름)">
							<button type="button" class="btn btn-primary mb-2"
								th:onclick="loadFriends()">검색</button>
						</div>
					</div>
				</div>

				<div class="d-flex justify-content-center" style="height: 72%;">

					<div class="pt-3 pb-3"
						style="width: 80%; overflow: auto; height: 95%;">
						<table class="w-100 table table-striped table-hover">
							<thead>

								<tr class="text-center">
									<th>NO</th>
									<th>ID</th>
									<th>이름</th>
									<th>전화번호</th>
									<th>생년월일</th>
									<th>성별</th>
									<th>이메일</th>
									<th>그룹</th>
								</tr>
							</thead>
							<tbody id="friendsBody">
								<th:block th:if="${#lists.isEmpty(friendList)}">
									<tr>
										<td colspan="9" class="text-center">친구를 추가해주세요.</td>
									</tr>
								</th:block>
								<th:block th:unless="${#lists.isEmpty(friendList)}"
									th:each="friend, status : ${friendList}">
									<tr>
										<td th:text="${status.count}"></td>
										<td th:text="${friend.id}"></td>
										<td><a th:text="${friend.name}"
											th:href="@{/friends/friendInfo/{id}(id=${friend.id})}"></a></td>
										<td th:text="${friend.mobile}"></td>
										<td th:text="${friend.birth}"></td>
										<td th:text="${friend.gender}"></td>
										<td th:text="${friend.email}"></td>
										<td th:text="${friend.groupName}"></td>
									</tr>
								</th:block>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- Modal -->
	<div class="modal" tabindex="-1" role="dialog" id="addFriend">
		<div class="modal-dialog modal-dialog-centered modal-lg"
			role="document">
			<div class="modal-content">
				<div class="modal-header" style="align-items: baseline;">
					<h1 class="modal-title">친구 추가</h1>&nbsp;
					<span>ID로 추가</span>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>

				<form th:action="@{/friends/add}" method="post">
					<div class="modal-body">
						<div>
							ID <input type="text" id="searchId" name="searchId"> <input
								type="button" class="btn" value="검색" onclick="loadMembers()">
						</div>
						<div id="memberInfo"></div>
					</div>
					<div class="modal-footer">
						<input type="submit" class="btnbtn-dark" value="친구 추가"
							th:onclick="return addOk()">
					</div>
					<input type="hidden" id="checkSearch" value="false">
				</form>
			</div>
		</div>
	</div>
</div>
</html>
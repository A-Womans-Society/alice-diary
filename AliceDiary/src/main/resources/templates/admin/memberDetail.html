<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<script src="https://code.jquery.com/jquery-1.11.3.js"></script>
</head>
<body>
    
    <h1 th:text="${member.id} + 'ë‹˜ì˜ íšŒì›ì •ë³´'" align="center"></h1>
    
<!--/* íšŒì›ìƒì„¸ë³´ê¸° ì˜ì—­ */-->
<div class="container">
	<div>
			<!--/* íšŒì› ì •ë³´ Rendering ì˜ì—­ */-->
			<th:block th:each="member : ${member}">
				<p th:text="|íšŒì›ë²ˆí˜¸ : ${member.num}|"></p>
				<p th:text="|í”„ë¡œí•„ì‚¬ì§„ : ${member.profileImg}|"></p> 
				<p><img id="profileImg" th:src="${member.profileImg}" alt="í”„ë¡œí•„ì‚¬ì§„"/></p> 
				<p th:text="|ì•„ì´ë”” : ${member.id}|"></p>
				<p th:text="|ë¹„ë°€ë²ˆí˜¸ : ${member.pwd}|"></p>
				<p th:text="|ì´ë¦„ : ${member.name}|"></p>
				<p th:text="|ì„±ë³„ : ${member.gender}|"></p>			
				<p th:text="|ìƒë…„ì›”ì¼ : ${member.birth}|"></p>
				<p th:text="|ì „í™”ë²ˆí˜¸ : ${member.mobile}|"></p>
				<p th:text="|ì´ë©”ì¼ : ${member.email}|"></p>
				<p th:text="|MBTI : ${member.mbti}|"></p>
				<p th:text="|ìœ„ì‹œë¦¬ìŠ¤íŠ¸ : ${member.wishlist}|"></p>
				<p th:text="|ì‹ ê³  ëˆ„ì íšŸìˆ˜ : ${member.reportCnt}|"></p>
				<p th:text="|ê°€ìž…ì¼ìž : ${member.regDate}|"></p>			
				<p th:text="|íšŒì›ìƒíƒœ : ${member.status}|"></p>		
				<p><button th:if="${member.getStatus().toString().equals('USER_IN')}" th:onclick="deleteMember([[${member.num}]])" type="button">ë‚´ë³´ë‚´ê¸°</button>
					<button th:unless="${member.getStatus().toString().equals('USER_IN')}" th:onclick="returnMember([[${member.num}]])" type="button">ë³µêµ¬í•˜ê¸°</button></p>
			</th:block>

	</div>
</div> <!-- /container -->

<script th:inline="javascript">Â  Â 
/*<![CDATA[*/
function deleteMember(num) {
	if (!confirm('ì •ë§ ì´ íšŒì›ì„ ë‚´ë³´ë‚´ê¸°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
		return false;
	}
	console.log(num);
	$.ajax({
		type : 'delete',
		url : "./" + num
	}).done(function(result) {
		console.log(result);
		if (result == 0) {
			alert("íšŒì› ë‚´ë³´ë‚´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”ðŸ˜¥");
		} else if (result == 1) {
			alert("í•´ë‹¹ íšŒì›ì´ ë‚´ë³´ë‚´ê¸° ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
			location.reload();
			return false;
		} else {
			console.log("ì—ëŸ¬ì—ëŸ¬ì—ëŸ¬");
		}
	}).fail(function(error) {
		console.log(error);
	});
}

function returnMember(num) {
	if (!confirm('ì •ë§ ì´ íšŒì›ìƒíƒœë¥¼ ë³µêµ¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
		return false;
	}
	console.log(num);
	$.ajax({
		type: 'patch',
		url: './member/'+num
	}).done(function(result) {
		console.log(result);
		if (result == 0) {
			alert("íšŒì› ë³µêµ¬ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”ðŸ˜¥");
		} else if (result == 1) {
			alert("íšŒì›ì´ í™œë™ìƒíƒœë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!");
			location.reload();
			return false;
		} else {
			console.log("ì—ëŸ¬ì—ëŸ¬ì—ëŸ¬");
		}
	}).fail(function(error) {
		console.log(error);
	});
}
/*]]>*/
</script>

</body>
</html>